<p align="center">
  <img src="static/images/logo.png" alt="Logo" width="80" height="80">
  <h3 align="center">å‘ç¥¨æ”¶é›†å·¥å…·</h3>
  <p align="center">
    ä¸€ä¸ªå›´ç»•ç€é£ä¹¦å¤šç»´è¡¨æ ¼å¹³å°ï¼Œå¯¹å‘ç¥¨è¿›è¡Œæ±‡æ€»ç»Ÿè®¡ç®¡ç†çš„å·¥å…·ã€‚
    <br />
    <br />
    <a href="https://github.com/Smoaflie/invoice_collection/issues">æŠ¥å‘ŠBug</a>
    Â·
    <a href="https://github.com/Smoaflie/invoice_collection/issues">æå‡ºæ–°ç‰¹æ€§</a>
  </p>

[![Contributors][contributors-shield]][contributors-url]
[![Forks][forks-shield]][forks-url]
[![Stargazers][stars-shield]][stars-url]
[![Issues][issues-shield]][issues-url]
[![MIT License][license-shield]][license-url]
[![LinkedIn][linkedin-shield]][linkedin-url]

## ç›®å½•

- [åŠŸèƒ½å±•ç¤º](#åŠŸèƒ½å±•ç¤º)
- [ä¸Šæ‰‹æŒ‡å—](#ä¸Šæ‰‹æŒ‡å—)
  - [å¼€å‘å‰çš„é…ç½®è¦æ±‚](#å¼€å‘å‰çš„é…ç½®è¦æ±‚)
  - [å®‰è£…æ­¥éª¤](#å®‰è£…æ­¥éª¤)
- [æ–‡ä»¶ç›®å½•è¯´æ˜](#æ–‡ä»¶ç›®å½•è¯´æ˜)
- [éƒ¨ç½²](#éƒ¨ç½²)
- [ä¾èµ–æ¨¡å—](#ä¾èµ–æ¨¡å—)
- [ä½œè€…](#ä½œè€…)
- [é¸£è°¢](#é¸£è°¢)
- [ç‰ˆæƒè¯´æ˜](#ç‰ˆæƒè¯´æ˜)

### åŠŸèƒ½å±•ç¤º

- ç”¨æˆ·æ‰¹é‡ä¸Šä¼ å‘ç¥¨ï¼Œè„šæœ¬è‡ªåŠ¨è§£æå‘ç¥¨ï¼Œæå–å‘ç¥¨ä¿¡æ¯å¹¶åŒæ­¥ç»“æœåˆ°æ”¶é›†è¡¨å†…

- å…è®¸ä½¿ç”¨å¤šä¸ªæ”¶é›†è¡¨æ”¶é›†ä¸åŒæ—¶æœŸå‘ç¥¨

- è‡ªåŠ¨å»é‡

- è‡ªå®šä¹‰å‘ç¥¨å®¡æ‰¹è§„åˆ™

  <img src=".\static\images\show1.jpg" alt="image-20250615125741251" style="zoom:33%;" />

  <img src=".\static\images\custom_rule.png" alt="image-20250615125741251" style="zoom: 50%;" />

- åˆ›å»ºå‘ç¥¨ä¿¡æ¯äº‘æ–‡æ¡£ / åŒæ­¥å…¨éƒ¨å‘ç¥¨ä¿¡æ¯åˆ°äº‘æ–‡æ¡£

- è‡ªå®šä¹‰å‘ç¥¨æ ‡ç­¾ï¼ˆå…è®¸æ‰¹é‡ä¿®æ”¹å‘ç¥¨æ ‡ç­¾ï¼‰
  <img src=".\static\images\show2.png" alt="image-20250615125741251" style="zoom:50%;" />

- æŒ‰ä¸åŒçš„è§„åˆ™å¯¼å‡ºå‘ç¥¨ï¼ˆå…è®¸å¤šç§è§„åˆ™å¹¶å­˜ï¼Œæ–‡ä»¶é‡‡ç”¨ç¡¬é“¾æ¥ï¼Œä¸å æ®é¢å¤–å­˜å‚¨ç©ºé—´ï¼‰

  - æ³¨æ„ï¼šWindowsç³»ç»Ÿä¸­ï¼Œä»…NTFSçš„ç£ç›˜æ ¼å¼æ‰æ”¯æŒç¡¬é“¾æ¥
  
  <img src=".\static\images\export.png" alt="image-20250615125741251" style="zoom:50%;" />
  
- è‡ªå®šä¹‰å¯¼å‡ºè§„åˆ™

  <img src=".\static\images\custom_rule2.png" alt="image-20250615125741251" style="zoom:50%;" />

  

### ä¸Šæ‰‹æŒ‡å—

###### å¼€å‘å‰çš„è¦æ±‚

1. Python 3.8+
2. [ç™¾åº¦æ™ºèƒ½äº‘è´¦å·](https://ai.baidu.com/ai-doc/OCR/fk3h7xu7h)(ç”¨ä»¥è°ƒç”¨OCRæ¥å£ï¼Œæ¯æœˆ1000æ¬¡å…è´¹é¢åº¦)
3. [é£ä¹¦è‡ªå»ºåº”ç”¨](https://open.feishu.cn/document/develop-process/self-built-application-development-process)(è„šæœ¬é€šè¿‡åº”ç”¨èº«ä»½æ“ä½œé£ä¹¦å¤šç»´è¡¨æ ¼)

###### **å®‰è£…æ­¥éª¤**

1. å…‹éš†è¯¥ä»“åº“

    ```bash
    git clone https://github.com/Smoaflie/invoice_collection.git
    cd invoice_collection
    ```

2. é…ç½®pythonè™šæ‹Ÿç¯å¢ƒ(å¯é€‰)

   ```bash
   python3 -m venv .venv
   
   # windowsç³»ç»Ÿ
   .\.venv\Scripts\activate
   # Linuxç³»ç»Ÿ
   source .venv/bin/activate
   ```

3. å®‰è£…ä¾èµ–æ¨¡å—

   ```bash
   pip install -r requirements.txt
   ```

4. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆåˆ†åˆ«è·å–é£ä¹¦API ç™¾åº¦APIå‡­è¯ä¿¡æ¯ï¼‰

   ```
   nano .env.example
   # æŒ‰ç…§æç¤ºä¿¡æ¯å¡«å…¥å¿…è¦å‚æ•°
   # ...
   mv .env.example .env
   ```

5. åœ¨é£ä¹¦ä¸­å¯¼å…¥è¯¥é¡¹ç›®çš„[å¤šç»´è¡¨æ ¼æ¨¡æ¿](https://fa4g5no1b1f.feishu.cn/wiki/HXZzwy1r8ijs7ykA1yDctUdonQd?from=from_copylink)

6. å°†ä½ çš„è‡ªå»ºåº”ç”¨æ·»åŠ ä¸ºæ–‡æ¡£åº”ç”¨

   > <img src=".\static\images\add_document_app1.png" alt="add_document_app1" style="zoom: 25%;" /><img src=".\static\images\add_document_app2.png" alt="add_document_app2" style="zoom: 25%;" />

7. åˆ° [é£ä¹¦å¼€å‘è€…åå°](https://open.feishu.cn/app) æ·»åŠ å¦‚ä¸‹æƒé™(å¯æ‰¹é‡æ·»åŠ )

   ```json
   {
     "scopes": {
       "tenant": [
         "bitable:app",
         "contact:user.base:readonly"
       ],
       "user": [
         "bitable:app",
         "contact:user.base:readonly"
       ]
     }
   }
   ```

8. æ‰§è¡Œ

   ```bash
   python3 main.py --help
   ```

**å‚æ•°è§£é‡Š**ï¼š

> - lark bitable url: é£ä¹¦å¤šç»´è¡¨æ ¼é“¾æ¥
>
>   æ ¼å¼: 
>
>   - å¦‚æœå¤šç»´è¡¨æ ¼çš„ URL ä»¥ **feishu.cn/base** å¼€å¤´ï¼Œè¯¥å¤šç»´è¡¨æ ¼çš„ app_token æ˜¯ä¸‹å›¾é«˜äº®éƒ¨åˆ†ï¼š![app_token.png](/static/images/app_token.png)
>   - å¦‚æœå¤šç»´è¡¨æ ¼çš„ URL ä»¥ **feishu.cn/wiki** å¼€å¤´ï¼Œä½ éœ€è°ƒç”¨çŸ¥è¯†åº“ç›¸å…³[è·å–çŸ¥è¯†ç©ºé—´èŠ‚ç‚¹ä¿¡æ¯](https://open.feishu.cn/document/ukTMukTMukTM/uUDN04SN0QjL1QDN/wiki-v2/space/get_node)æ¥å£è·å–å¤šç»´è¡¨æ ¼çš„ app_tokenã€‚å½“ obj_type çš„å€¼ä¸º bitable æ—¶ï¼Œobj_token å­—æ®µçš„å€¼æ‰æ˜¯å¤šç»´è¡¨æ ¼çš„ app_tokenã€‚
>
>   ä»¥ **feishu.cn/base** å¼€å¤´çš„urlè·å–åŠæ³•:
>
>   ![lark_bitable_url](/static/images/lark_bitable_url.png)



### æ–‡ä»¶ç›®å½•è¯´æ˜

```
invoice_collect/
â”œâ”€â”€ core/                      # ğŸ“¦ æ ¸å¿ƒæ¨¡å—ï¼ˆå‘ç¥¨ä¸åº•å±‚é€»è¾‘ï¼‰
â”‚   â”œâ”€â”€ invoice/               # å‘ç¥¨å¤„ç†é€»è¾‘ï¼ˆåŸºç±»ã€OCR ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ base.py            # å‘ç¥¨åŸºç±»ï¼ˆå¦‚ InvoiceBaseï¼‰
â”‚   â”‚   â”œâ”€â”€ baidu_ocr.py       # Baidu OCR è¯†åˆ«æ¥å£å°è£…
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ log.py                 # æ—¥å¿—é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ utils.py               # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ static/                    # ğŸ“ README ç”¨åˆ°çš„é™æ€èµ„æºï¼ˆå¦‚å›¾ç‰‡ï¼‰
â”‚   â””â”€â”€ images
â”œâ”€â”€ main.py                    # âœ… å…¥å£ç¨‹åºï¼ˆå«å‚æ•°è§£æã€è°ƒåº¦ç­‰ï¼‰
â”œâ”€â”€ function.py                # æ ¸å¿ƒåŠŸèƒ½å‡½æ•°
â”œâ”€â”€ custom_rule.py             # è‡ªå®šä¹‰è§„åˆ™é€»è¾‘
â”œâ”€â”€ .env.example               # ç¯å¢ƒå˜é‡æ ·ä¾‹
â”œâ”€â”€ group.json.example         # group é…ç½®æ ·ä¾‹
â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ requirements.txt           # ä¾èµ–æ¸…å•

```


### ä¾èµ–æ¨¡å—

- [oapi-sdk-python](https://github.com/larksuite/oapi-sdk-python)
- [sqlite-utils](https://github.com/simonw/sqlite-utils)
- [sqlite-web](https://github.com/coleifer/sqlite-web)
- [tqdm](https://github.com/tqdm/tqdm)
- [yaspin](https://github.com/pavdmyt/yaspin)

### ä½œè€…

[@smoaflie](https://github.com/Smoaflie)

mail: smoaflie@outlook.com

qq: 1373987167  

### é¸£è°¢

- [Best_README_template](https://github.com/shaojintian/Best_README_template)


- [Img Shields](https://shields.io)
- [Choose an Open Source License](https://choosealicense.com)

### ç‰ˆæƒè¯´æ˜

è¯¥é¡¹ç›®ç­¾ç½²äº†MIT æˆæƒè®¸å¯ï¼Œè¯¦æƒ…è¯·å‚é˜… [LICENSE](https://github.com/Smoaflie/invoice_collection/blob/master/LICENSE)



<!-- links -->

[contributors-shield]: https://img.shields.io/github/contributors/Smoaflie/invoice_collection.svg?style=flat-square
[contributors-url]: https://github.com/Smoaflie/invoice_collection/graphs/contributors
[forks-shield]: https://img.shields.io/github/forks/Smoaflie/invoice_collection.svg?style=flat-square
[forks-url]: https://github.com/Smoaflie/invoice_collection/network/members
[stars-shield]: https://img.shields.io/github/stars/Smoaflie/invoice_collection.svg?style=flat-square
[stars-url]: https://github.com/Smoaflie/invoice_collection/stargazers
[issues-shield]: https://img.shields.io/github/issues/Smoaflie/invoice_collection.svg?style=flat-square
[issues-url]: https://img.shields.io/github/issues/Smoaflie/invoice_collection.svg
[license-shield]: https://img.shields.io/github/license/Smoaflie/invoice_collection.svg?style=flat-square
[license-url]: https://github.com/Smoaflie/invoice_collection/blob/master/LICENSE.txt
[linkedin-shield]: https://img.shields.io/badge/-LinkedIn-black.svg?style=flat-square&logo=linkedin&colorB=555
[linkedin-url]: https://linkedin.com/in/shaojintian



